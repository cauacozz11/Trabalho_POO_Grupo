<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de {{ tipo.capitalize() }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='cadastro.css') }}">
</head>
<body id="corpo">

    <div class="container">
        
        <nav id="menu">
            <div class="menu-topo">
                <a href="{{ url_for('main.index') }}" id="botaoVoltar">← Voltar</a>
                <h1 id="titulo">Cadastrar Novo {{ tipo.capitalize() }}</h1>
            </div>
        </nav>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul class="flashes">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul class="flashes">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        <form action="{{ url_for('main.processar_cadastro') }}" method="POST" class="form-cadastro">
            
            <input type="hidden" name="tipo" value="{{ tipo }}">

            {% if tipo == 'livro' or tipo == 'revista' %}
                <label for="titulo">Título:</label>
                <input type="text" id="titulo" name="titulo" required>
                
                <label for="categoria">Categoria:</label>
                <input type="text" id="categoria" name="categoria" required>
                
                <label for="editora">Editora:</label>
                <input type="text" id="editora" name="editora" required>

                {% if tipo == 'livro' %}
                    <label for="autor">Autor:</label>
                    <input type="text" id="autor" name="autor">
                {% endif %}
                
                {% if tipo == 'revista' %}
                    <label for="edicao">Edição (Número):</label>
                    <input type="number" id="edicao" name="edicao" min="1" value="1">
                {% endif %}

            {% elif tipo == 'cliente' %}
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required>
                
                <label for="cpf">CPF (Apenas números):</label>
                <input type="text" id="cpf" name="cpf" pattern="\d{11}" title="Digite 11 números." required>
                
                <label for="telefone">Telefone:</label>
                <input type="text" id="telefone" name="telefone">

            {% endif %}

            <button type="submit">Cadastrar {{ tipo.capitalize() }}</button>
        </form>

    </div>

    <footer id="rodape">Biblioteca Univille - 2025</footer>
</body>
</html>